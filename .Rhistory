) +
labs(title = "Temperature et pluviometrie", x = element_blank())
meteo <- read_excel("Sorgho20_21_22_CIPF.xlsx",sheet = "pluvio_temp")
scalefactor <- max(meteo$mean_rain)/max(meteo$mean_temp)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_line(aes(y=mean_temp,width=2),col='red')+
scale_y_continuous(name='pluviometrie',sec.axis = sec_axis(~./scalefactor,name="temperature"))+
theme(
axis.title.y.left=element_text(color="blue"),
axis.text.y.left=element_text(color="blue"),
axis.title.y.right=element_text(color="red"),
axis.text.y.right=element_text(color="red")
) +
labs(title = "Temperature et pluviometrie", x = element_blank())
warnings()
rm(list=ls()) # Clean the workspace
library(pander)
library(readxl)
library(tidyverse)
library(knitr)
library(htmltools)
data<- read_excel("Sorgho20_21_22_CIPF.xlsx")
head(data)
cols_to_remove <- c('date_semis','date_recolte','lieu','precedent','traitement_semences','densite_semis')
data <- data[, ! names(data) %in% cols_to_remove, drop = F]
data$variete <- as.factor(data$variete)
pander(summary(data))
meteo <- read_excel("Sorgho20_21_22_CIPF.xlsx",sheet = "pluvio_temp")
scalefactor <- max(meteo$mean_rain)/max(meteo$mean_temp)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_line(aes(y=mean_temp,width=2),col='red')+
scale_y_continuous(name='pluviometrie',sec.axis = sec_axis(~./scalefactor,name="temperature"))+
theme(
axis.title.y.left=element_text(color="blue"),
axis.text.y.left=element_text(color="blue"),
axis.title.y.right=element_text(color="red"),
axis.text.y.right=element_text(color="red")
) +
labs(title = "Temperature et pluviometrie", x = element_blank())
rm(list=ls()) # Clean the workspace
library(pander)
library(readxl)
library(tidyverse)
library(knitr)
library(htmltools)
data<- read_excel("Sorgho20_21_22_CIPF.xlsx")
head(data)
data<- read_excel("Sorgho20_21_22_CIPF.xlsx")
head(data)
cols_to_remove <- c('date_semis','date_recolte','lieu','precedent','traitement_semences','densite_semis')
data <- data[, ! names(data) %in% cols_to_remove, drop = F]
data$variete <- as.factor(data$variete)
pander(summary(data))
meteo <- read_excel("Sorgho20_21_22_CIPF.xlsx",sheet = "pluvio_temp")
scalefactor <- max(meteo$mean_rain)/max(meteo$mean_temp)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_line(aes(y=mean_temp,width=2),col='red')+
scale_y_continuous(name='pluviometrie',sec.axis = sec_axis(~./scalefactor,name="temperature"))+
theme(
axis.title.y.left=element_text(color="blue"),
axis.text.y.left=element_text(color="blue"),
axis.title.y.right=element_text(color="red"),
axis.text.y.right=element_text(color="red")
) +
labs(title = "Temperature et pluviometrie", x = element_blank())
ggplot(data=data,aes(x=variete,y=rendement_MS))+
geom_bar(stat = 'identity')+ facet_wrap(~annee)+
labs(x='Variété',
y='rendement [T/ha]')
meteo <- read_excel("Sorgho20_21_22_CIPF.xlsx",sheet = "pluvio_temp")
scalefactor <- max(meteo$mean_rain)/max(meteo$mean_temp)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_line(aes(y=mean_temp,width=2),col='red')+
scale_y_continuous(name='pluviometrie',sec.axis = sec_axis(~./scalefactor,name="temperature"))+
theme(
axis.title.y.left=element_text(color="blue"),
axis.text.y.left=element_text(color="blue"),
axis.title.y.right=element_text(color="red"),
axis.text.y.right=element_text(color="red")
) +
labs(title = "Temperature et pluviometrie", x = element_blank())
meteo <- read_excel("Sorgho20_21_22_CIPF.xlsx",sheet = "pluvio_temp")
scalefactor <- max(meteo$mean_rain)/max(meteo$mean_temp)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
# geom_line(aes(y=mean_temp,width=2),col='red')+
# scale_y_continuous(name='pluviometrie',sec.axis = sec_axis(~./scalefactor,name="temperature"))+
# theme(
#   axis.title.y.left=element_text(color="blue"),
#   axis.text.y.left=element_text(color="blue"),
#   axis.title.y.right=element_text(color="red"),
#   axis.text.y.right=element_text(color="red")
# ) +
labs(title = "Temperature et pluviometrie", x = element_blank())
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=1),fill='blue')+
labs(title = "Temperature et pluviometrie", x = element_blank())
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
labs(title = "Temperature et pluviometrie", x = element_blank())
#Plot temperature
ggplot(data = meteo, aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_temp,width=0.5),fill='red')+
labs(title='Temperature')
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
labs(title = "Temperature et pluviometrie")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_abline(aes(y=mean(mean_rain)))
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_abline(aes(y=mean(mean_rain),width=1))
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_abline(aes(y=mean(mean_rain),width=1))+
labs(title = "Temperature et pluviometrie")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_line(aes(y=mean(mean_rain),width=1))+
labs(title = "Temperature et pluviometrie")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_line(aes(y=mean(mean_rain),width=1,col='black'))+
labs(title = "Temperature et pluviometrie")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_line(aes(y=mean(mean_rain),width=1))+
labs(title = "Temperature et pluviometrie")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_abline(aes(h=mean(mean_rain),width=1))+
labs(title = "Temperature et pluviometrie")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
labs(title = "Temperature et pluviometrie")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_abline(h=mean(mean_rain))
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_abline(h=mean(meteo$mean_rain))
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_abline(mean(meteo$mean_rain))
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_abline(mean(meteo$mean_rain),0)
labs(title = "Temperature et pluviometrie")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_abline(mean(meteo$mean_rain),0)+
labs(title = "Temperature et pluviometrie")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_abline(mean(meteo$mean_rain),0)+
labs(title = "Temperature et pluviometrie")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_hline(yintercept = mean(mean_rain))
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))
meteo <- read_excel("Sorgho20_21_22_CIPF.xlsx",sheet = "pluvio_temp")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))
labs(title = "Temperature et pluviometrie")
#Plot temperature
ggplot(data = meteo, aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_temp,width=0.5),fill='red')+
labs(title='Temperature')
labs(title = "Temperature et pluviometrie")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain,width=0.5),fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
annotate('aa')
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
annotate('aa')+
labs(title = "Temperature et pluviometrie")
#Plot precipitation
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
annotate("text", x=6, y=10, label= "hello")+
labs(title = "Temperature et pluviometrie")
#Plot precipitation
mean_all_p <- c(mean(meteo$mean_rain[,annee==2020]))
meteo$mean_rain[,annee==2020]
meteo$mean_rain[[,annee==2020]]
meteo[,annee]
meteo[annee,]
meteo[,annee==2020]
View(meteo)
meteo$annee==2020
mean(meteo$mean_rain) %in% meteo$annee==2020
subset(meteo,annee==2020)
mean((subset(meteo,annee==2020))$mean$rain)
mean((subset(meteo,annee==2020)$mean_rain))
#Plot precipitation
mean((subset(meteo,annee==2020)$mean_rain))
#Plot precipitation
mean((subset(meteo,annee==2020)$mean_rain))
mean((subset(meteo,annee==2021)$mean_rain))
mean((subset(meteo,annee==2022)$mean_rain))
#Plot precipitation
mean_cult_rain <- c('2020'=mean((subset(meteo,annee==2020)$mean_rain)))
mean_cult_rain
#Plot precipitation
mean_cult_rain <-data.frame(
label=c(mean((subset(meteo,annee==2020)$mean_rain)),1,2),
annee=c(2020,2021,2022))
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,aes(x=-Inf,y=-Inf,label=label))
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=1)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=100)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=7,
vjust=100)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=7,
vjust=100)
#Plot precipitation
mean_cult_rain <-data.frame(
label=c('d','d','d'),
annee=c(2020,2021,2022))
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=7,
vjust=100)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=-1)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=-150)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=-0.5)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=-0.2)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=-4)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=-150)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=-6)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=-10)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=-40)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=-30)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.1,
vjust=-35)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-0.7,
vjust=-35)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-4,
vjust=-35)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-4,
vjust=-38)
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-4,
vjust=-37)
#Plot precipitation
mean_cult_rain <-data.frame(
label=c(mean((subset(meteo,annee==2020)$mean_rain)),'d','d'),
annee=c(2020,2021,2022))
ggplot(data=meteo,aes(x=Mois))+
facet_wrap(~annee)+
geom_col(aes(y=mean_rain),width=0.5,fill='blue')+
geom_hline(yintercept = mean(meteo$mean_rain))+
geom_text(data=mean_cult_rain,
aes(x=-Inf,y=-Inf,label=label),
hjust=-4,
vjust=-37)
#Plot precipitation
mean_culture_rain <- data.frame('2020'=mean((subset(meteo,annee==2020)$mean_rain)))
View(mean_cult_rain)
View(mean_culture_rain)
#Plot precipitation
mean_culture_rain <- data.frame(2020=mean((subset(meteo,annee==2020)$mean_rain)))
mean_culture_rain <- c(
mean((subset(meteo,annee==2020)$mean_rain)),
mean((subset(meteo,annee==2021)$mean_rain)),
mean((subset(meteo,annee==2022)$mean_rain))
)
mean_culture_rain <- rbind(c(2020,2021,2022),mean_culture_rain)
View(mean_cult_rain)
View(mean_culture_rain)
#Plot precipitation
mean_culture_rain <- data.frame(c(2020,2021,2022),mean_culture_rain)
#Plot precipitation
mean_culture_rain <- data.frame(c(2020,2021,2022)=mean_culture_rain)
rm(list=ls()) # Clean the workspace
library(pander)
library(readxl)
library(tidyverse)
library(knitr)
library(htmltools)
meteo <- read_excel("Sorgho20_21_22_CIPF.xlsx",sheet = "pluvio_temp")
mean_culture_rain <- c(
mean((subset(meteo,annee==2020)$mean_rain)),
mean((subset(meteo,annee==2021)$mean_rain)),
mean((subset(meteo,annee==2022)$mean_rain))
)
mean_culture_rain <- data.frame(c(2020,2021,2022),mean_culture_rain)
View(mean_culture_rain)
meteo <- read_excel("Sorgho20_21_22_CIPF.xlsx",sheet = "pluvio_temp")
mean_culture_rain <- c(
mean((subset(meteo,annee==2020)$mean_rain)),
mean((subset(meteo,annee==2021)$mean_rain)),
mean((subset(meteo,annee==2022)$mean_rain))
)
mean_culture_rain1 <- rbind(c(2020,2021,2022),mean_culture_rain)
mean_culture_rain1
View(mean_culture_rain1)
mean_culture_rain <- data.frame(c(2020,2021,2022),mean_culture_rain)
View(mean_culture_rain)
